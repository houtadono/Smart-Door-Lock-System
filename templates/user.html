<!DOCTYPE html>
<html lang="en">

    <head>
        <meta charset="UTF-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>Iot User</title>
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.1/css/all.min.css" integrity="sha512-+4zCK9k+qNFUR5X+cKL9EIR+ZOhtIloNl9GIKS57V1MyNsYpYcUrUeQc9vNfzsWfV28IaLL3i96P9sdNyeRssA==" crossorigin="anonymous" />
        <link href="https://cdn.jsdelivr.net/npm/remixicon@2.5.0/fonts/remixicon.css" rel="stylesheet">
        <link rel="stylesheet" href="{{ url_for('static', filename='user.css') }}">
        <link rel="stylesheet" href="{{ url_for('static', filename='toast.css') }}">
        <link rel="stylesheet" href="{{ url_for('static', filename='keyboard.css') }}">
<!--        <link rel="stylesheet" href="../static/user.css">-->
    </head>

    <body>
        <div id="toast"></div>
        <div class="container" >
            <div class="container-lock card">
                <div id="lock" class="lock no-animation">
                    <div id="lock-top">

                    </div>
                </div>
                <h2 id="lock-status" class="lock-status"></h2>
            </div>
            <div class="container-user card">
                {% if username %}
                <nav>
                    <h1>Xin chào {{ username }}, Test camera</h1>
                    <button id="btn-pincode" class="btn-select-tab btn-selected" onclick= "openTab(event, 'tab-pincode')">Mã Pin</button>
                    <button id="btn-camera" class="btn-select-tab" onclick= "openTab(event, 'tab-camera')">Camera</button>
                    <button id="logoutButton" class="btn-select-tab" onclick="logout()">Log out</button>
                </nav>
                <div class="divider" style="border-bottom: 2px dashed #e0d4d4; margin: 1.4rem auto"></div>
                <div id="tab-pincode" class="tab-content">
                     <div class="form-pincode">
                        <input type="number" class="keyboard" id="pincode" name="pincode" disabled>
                        <button type="submit" onclick="check_pincode()">Gửi</button>
                    </div>

                    <input type="button" value="1" onclick="clickPincode('1')"/>
                    <input type="button" value="2" onclick="clickPincode('2')"/>
                    <input type="button" value="3" onclick="clickPincode('3')"/>
                    <input type="button" value="4" onclick="clickPincode('4')"/>
                    <input type="button" value="5" onclick="clickPincode('5')"/>
                    <input type="button" value="6" onclick="clickPincode('6')"/>
                    <input type="button" value="7" onclick="clickPincode('7')"/>
                    <input type="button" value="8" onclick="clickPincode('8')"/>
                    <input type="button" value="9" onclick="clickPincode('9')"/>
                    <input type="button" value="0" onclick="clickPincode('0')"/>
                    <input type="button" value="Backspace" id="btnBack" onclick="backspace()"/>
                </div>
                <div id="tab-camera" class="tab-camera tab-content">

                    <div class="tab-camera--sub">
                        <button id="toggleCamera" onclick="toggleCamera()">Bắt đầu xác thực</button>
                        <p id="timer" class="timer"></p>
                    </div>
                    <div class="tab-camera--sub">
                        <video id="video" class="video"  style="transform: scaleX(-1);" autoplay></video>
                        <canvas id="processedVideo"  class="video" ></canvas>
                    </div>
                </div>


                {% else %}
                    <p style="padding:10px; font-size:30px ">User not authenticated, please verify <a style="color:gray;" href="/iot">here</a> </p>
                {% endif %}
            </div>
        </div>

        <script src="https://cdnjs.cloudflare.com/ajax/libs/socket.io/4.0.1/socket.io.js"></script>
        <script src="{{ url_for('static', filename='service_socket.js') }}"></script>
        <script src="{{ url_for('static', filename='user.js') }}"></script>
<!--        <script src="../static/user.js"></script>-->
    </body>

</html>